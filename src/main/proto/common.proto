syntax = "proto3";

package com.hymnsmobile.pipeline.models;

option java_multiple_files = true;

enum HymnType {
  CLASSIC_HYMN = 0;
  NEW_TUNE = 1;
  NEW_SONG = 2;
  CHILDREN_SONG = 3;
  HOWARD_HIGASHI = 4;
  DUTCH = 5;
  GERMAN = 6;
  CHINESE = 7;
  CHINESE_SIMPLIFIED = 8;
  CHINESE_SUPPLEMENTAL = 9;
  CHINESE_SUPPLEMENTAL_SIMPLIFIED = 10;
  CEBUANO = 11;
  TAGALOG = 12;
  FRENCH = 13;
  SPANISH = 14;
}

message Hymn {
  SongReference reference = 1;
  string title = 2;
  repeated Verse lyrics = 3;
  optional string category = 4;
  optional string sub_category = 5;
  optional string author = 6;
  optional string composer = 7;
  optional string key = 8;
  optional string time = 9;
  optional string meter = 10;
  optional string scriptures = 11;
  optional string hymnCode = 12;
  optional string musicJson = 13;
  optional string svgJson = 14;
  optional string pdfJson = 15;
  repeated SongReference languages = 16;
  repeated  SongReference relevants = 17;
}

message SongReference {
  optional string hymnal_db_key = 1;
}

message Verse {
  string verse_type = 1;
  repeated string verse_content = 2;
  repeated string transliteration = 3;
}

// An error encountered during processing of the pipeline.
message PipelineError {
  enum Severity {
    // Should log error, but not the end of the world.
    WARNING = 0;
    // Blocks the hymn from ingestion but does not block the pipeline.
    ERROR = 1;
    // Blocks the entire pipeline from completion.
    FATAL = 2;
  }
  string message = 1;
  Severity severity = 2;
}